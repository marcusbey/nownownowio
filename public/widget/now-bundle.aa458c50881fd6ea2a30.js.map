{"version":3,"file":"now-bundle.aa458c50881fd6ea2a30.js","mappings":"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","sources":["webpack://NowNowNowWidget/./src/lib/utils.ts","webpack://NowNowNowWidget/./src/components/ui/avatar.tsx","webpack://NowNowNowWidget/./src/components/ui/scroll-area.tsx","webpack://NowNowNowWidget/./src/components/ui/typography.tsx","webpack://NowNowNowWidget/./src/lib/cache.ts","webpack://NowNowNowWidget/./now-widget/SidePanelContent.tsx"],"sourcesContent":["import { clsx } from \"clsx\";\nimport { formatDate, formatDistanceToNowStrict } from \"date-fns\";\nimport { twMerge } from \"tailwind-merge\";\nexport function cn(...inputs) {\n    return twMerge(clsx(inputs));\n}\nexport function formatRelativeDate(from) {\n    const currentDate = new Date();\n    if (currentDate.getTime() - from.getTime() < 24 * 60 * 60 * 1000) {\n        return formatDistanceToNowStrict(from, { addSuffix: true });\n    }\n    else {\n        if (currentDate.getFullYear() === from.getFullYear()) {\n            return formatDate(from, \"MMM d\");\n        }\n        else {\n            return formatDate(from, \"MMM d, yyyy\");\n        }\n    }\n}\nexport function formatNumber(n) {\n    return Intl.NumberFormat(\"en-US\", {\n        notation: \"compact\",\n        maximumFractionDigits: 1,\n    }).format(n);\n}\nexport function slugify(input) {\n    return input\n        .toLowerCase()\n        .replace(/ /g, \"-\")\n        .replace(/[^a-z0-9-]/g, \"\");\n}\n","\"use client\";\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from \"react\";\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\";\nimport { cn } from \"@/lib/utils\";\nconst Avatar = React.forwardRef((_a, ref) => {\n    var { className } = _a, props = __rest(_a, [\"className\"]);\n    return (React.createElement(AvatarPrimitive.Root, Object.assign({ ref: ref, className: cn(\"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\", className) }, props)));\n});\nAvatar.displayName = AvatarPrimitive.Root.displayName;\nconst AvatarImage = React.forwardRef((_a, ref) => {\n    var { className } = _a, props = __rest(_a, [\"className\"]);\n    return (React.createElement(AvatarPrimitive.Image, Object.assign({ ref: ref, className: cn(\"aspect-square h-full w-full\", className) }, props)));\n});\nAvatarImage.displayName = AvatarPrimitive.Image.displayName;\nconst AvatarFallback = React.forwardRef((_a, ref) => {\n    var { className } = _a, props = __rest(_a, [\"className\"]);\n    return (React.createElement(AvatarPrimitive.Fallback, Object.assign({ ref: ref, className: cn(\"flex h-full w-full items-center justify-center rounded-full bg-muted\", className) }, props)));\n});\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName;\nexport { Avatar, AvatarImage, AvatarFallback };\n","\"use client\";\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from \"react\";\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\";\nimport { cn } from \"@/lib/utils\";\nconst ScrollArea = React.forwardRef((_a, ref) => {\n    var { className, children } = _a, props = __rest(_a, [\"className\", \"children\"]);\n    return (React.createElement(ScrollAreaPrimitive.Root, Object.assign({ ref: ref, className: cn(\"relative overflow-hidden\", className) }, props),\n        React.createElement(ScrollAreaPrimitive.Viewport, { className: \"h-full w-full rounded-[inherit]\" }, children),\n        React.createElement(ScrollBar, null),\n        React.createElement(ScrollAreaPrimitive.Corner, null)));\n});\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName;\nconst ScrollBar = React.forwardRef((_a, ref) => {\n    var { className, orientation = \"vertical\" } = _a, props = __rest(_a, [\"className\", \"orientation\"]);\n    return (React.createElement(ScrollAreaPrimitive.ScrollAreaScrollbar, Object.assign({ ref: ref, orientation: orientation, className: cn(\"flex touch-none select-none transition-colors\", orientation === \"vertical\" &&\n            \"h-full w-2.5 border-l border-l-transparent p-[1px]\", orientation === \"horizontal\" &&\n            \"h-2.5 flex-col border-t border-t-transparent p-[1px]\", className) }, props),\n        React.createElement(ScrollAreaPrimitive.ScrollAreaThumb, { className: \"relative flex-1 rounded-full bg-border\" })));\n});\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName;\nexport { ScrollArea, ScrollBar };\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { cn } from \"@/lib/utils\";\nimport { cva } from \"class-variance-authority\";\nimport React, { forwardRef } from \"react\";\nconst fixedForwardRef = forwardRef;\nexport const typographyVariants = cva(\"\", {\n    variants: {\n        variant: {\n            h1: \"scroll-m-20 font-caption text-4xl font-extrabold tracking-tight lg:text-5xl\",\n            h2: \"scroll-m-20 font-caption text-3xl font-semibold tracking-tight transition-colors\",\n            h3: \"scroll-m-20 font-caption text-xl font-semibold tracking-tight\",\n            p: \"leading-7 [&:not(:first-child)]:mt-6\",\n            default: \"\",\n            quote: \"mt-6 border-l-2 pl-6 italic\",\n            code: \"relative rounded bg-muted px-[0.3rem] py-[0.2rem] font-mono text-sm font-semibold\",\n            lead: \"text-xl text-muted-foreground\",\n            large: \"text-lg font-semibold\",\n            small: \"text-sm font-medium leading-none \",\n            muted: \"text-sm text-muted-foreground\",\n            link: \"font-medium text-cyan-600 hover:underline dark:text-primary\",\n        },\n    },\n    defaultVariants: {\n        variant: \"default\",\n    },\n});\nconst defaultElementMapping = {\n    h1: \"h1\",\n    h2: \"h2\",\n    h3: \"h3\",\n    p: \"p\",\n    quote: \"p\",\n    code: \"code\",\n    lead: \"p\",\n    large: \"p\",\n    small: \"p\",\n    muted: \"p\",\n    link: \"a\",\n    default: \"p\",\n};\n/**\n * The Typography component is useful to add Text to your page\n *\n * Usage :\n *\n * ```tsx\n * <Typography variant=\"h1\">Hello World</Typography>\n * <Typography variant=\"h2\" as=\"a\" href=\"#\">Hello World</Typography>\n * <Typography variant=\"large\" as={Link} href=\"#\">Hello World</Typography>\n * ```\n *\n * You can use the `as` prop to define the element type of the component\n * `as` can be a string or a component\n *\n * @param params The parameters of the component\n * @param ref The ref of the element. Untyped because it's a generic\n * @returns\n */\nconst InnerTypography = (_a, ref) => {\n    var { variant = \"default\", className, as } = _a, props = __rest(_a, [\"variant\", \"className\", \"as\"]);\n    const Comp = as !== null && as !== void 0 ? as : defaultElementMapping[variant !== null && variant !== void 0 ? variant : \"default\"];\n    return (React.createElement(Comp, Object.assign({}, props, { className: cn(typographyVariants({ variant }), className), ref: ref })));\n};\nexport const Typography = fixedForwardRef(InnerTypography);\n","import NodeCache from 'node-cache';\nconst cache = new NodeCache({ stdTTL: 300 }); // Cache for 5 minutes\nexport function getCachedData(key, fetchData) {\n    return new Promise((resolve, reject) => {\n        const cachedData = cache.get(key);\n        if (cachedData) {\n            resolve(cachedData);\n        }\n        else {\n            fetchData()\n                .then((data) => {\n                cache.set(key, data);\n                resolve(data);\n            })\n                .catch(reject);\n        }\n    });\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Typography } from \"@/components/ui/typography\";\nimport { getCachedData } from \"@/lib/cache\";\nimport { Bookmark, MessageSquare, ThumbsUp } from \"lucide-react\";\nimport React, { useEffect, useState } from \"react\";\nconst SidePanelContent = ({ userId, token, posts: initialPosts, user: initialUser, }) => {\n    var _a, _b;\n    const [posts, setPosts] = useState(initialPosts);\n    const [user, setUser] = useState(initialUser);\n    const [isLoading, setIsLoading] = useState(true);\n    const [error, setError] = useState(null);\n    const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:3000\";\n    useEffect(() => {\n        const fetchData = () => __awaiter(void 0, void 0, void 0, function* () {\n            try {\n                const data = yield getCachedData(`userData_${userId}`, () => __awaiter(void 0, void 0, void 0, function* () {\n                    const response = yield fetch(`${API_BASE_URL}/api/widget/user-data?userId=${userId}`, {\n                        headers: {\n                            Authorization: `Bearer ${token}`,\n                        },\n                    });\n                    if (!response.ok) {\n                        throw new Error(`HTTP error! status: ${response.status}`);\n                    }\n                    return response.json();\n                }));\n                if (data.success) {\n                    setPosts(data.data.recentPosts);\n                    setUser(data.data.user);\n                }\n                else {\n                    throw new Error(data.error || \"Failed to fetch data\");\n                }\n            }\n            catch (err) {\n                setError(err instanceof Error ? err.message : \"An unexpected error occurred\");\n            }\n            finally {\n                setIsLoading(false);\n            }\n        });\n        fetchData();\n    }, [userId, token, API_BASE_URL]);\n    if (isLoading)\n        return React.createElement(\"div\", { className: \"text-white\" }, \"Loading...\");\n    if (error)\n        return React.createElement(\"div\", { className: \"text-white\" },\n            \"Error: \",\n            error);\n    return (React.createElement(\"div\", { className: \"size-full border-r bg-gray-900\" },\n        React.createElement(\"div\", { className: \"border-b border-gray-800 p-4\" },\n            React.createElement(\"div\", { className: \"flex items-center space-x-4\" },\n                React.createElement(Avatar, null,\n                    React.createElement(AvatarImage, { src: (user === null || user === void 0 ? void 0 : user.image) || \"\", alt: (user === null || user === void 0 ? void 0 : user.displayName) || (user === null || user === void 0 ? void 0 : user.name) || \"\" }),\n                    React.createElement(AvatarFallback, null, ((_a = user === null || user === void 0 ? void 0 : user.displayName) === null || _a === void 0 ? void 0 : _a[0]) || ((_b = user === null || user === void 0 ? void 0 : user.name) === null || _b === void 0 ? void 0 : _b[0]) || \"\")),\n                React.createElement(\"div\", null,\n                    React.createElement(Typography, { variant: \"h2\", className: \"text-lg font-semibold text-white\" }, (user === null || user === void 0 ? void 0 : user.displayName) || (user === null || user === void 0 ? void 0 : user.name)),\n                    React.createElement(Typography, { variant: \"p\", className: \"text-sm text-gray-400\" }, user === null || user === void 0 ? void 0 : user.bio)))),\n        React.createElement(ScrollArea, { className: \"h-[calc(100vh-120px)]\" },\n            React.createElement(\"div\", { className: \"space-y-6 p-4\" }, posts.map((post) => (React.createElement(\"div\", { key: post.id, className: \"space-y-2\" },\n                React.createElement(Typography, { variant: \"small\", className: \"text-sm text-gray-400\" }, new Date(post.createdAt).toLocaleString()),\n                React.createElement(Typography, { variant: \"p\", className: \"text-sm text-white\" }, post.content),\n                React.createElement(\"div\", { className: \"flex items-center space-x-4 text-xs text-gray-400\" },\n                    React.createElement(\"div\", { className: \"flex items-center space-x-1\" },\n                        React.createElement(MessageSquare, { className: \"size-3\" }),\n                        React.createElement(\"span\", null, post._count.comments)),\n                    React.createElement(\"div\", { className: \"flex items-center space-x-1\" },\n                        React.createElement(Bookmark, { className: \"size-3\" }),\n                        React.createElement(\"span\", null, post._count.bookmarks)),\n                    React.createElement(\"div\", { className: \"flex items-center space-x-1\" },\n                        React.createElement(ThumbsUp, { className: \"size-3\" }),\n                        React.createElement(\"span\", null, post._count.likes))))))))));\n};\nexport default SidePanelContent;\n"],"names":[],"sourceRoot":""}