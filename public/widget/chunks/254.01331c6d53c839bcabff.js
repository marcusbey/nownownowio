"use strict";(this.webpackChunkNowNowNowWidget=this.webpackChunkNowNowNowWidget||[]).push([[254],{254:(e,t,a)=>{a.r(t),a.d(t,{default:()=>L});var r=a(758),n=a(593),l=a(526),s=a(190);function o(...e){return(0,s.QP)((0,l.$)(e))}var c=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a};const i=r.forwardRef(((e,t)=>{var{className:a}=e,l=c(e,["className"]);return r.createElement(n.bL,Object.assign({ref:t,className:o("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a)},l))}));i.displayName=n.bL.displayName;const m=r.forwardRef(((e,t)=>{var{className:a}=e,l=c(e,["className"]);return r.createElement(n._V,Object.assign({ref:t,className:o("aspect-square h-full w-full",a)},l))}));m.displayName=n._V.displayName;const d=r.forwardRef(((e,t)=>{var{className:a}=e,l=c(e,["className"]);return r.createElement(n.H4,Object.assign({ref:t,className:o("flex h-full w-full items-center justify-center rounded-full bg-muted",a)},l))}));d.displayName=n.H4.displayName;var u=a(222),f=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a};const p=r.forwardRef(((e,t)=>{var{className:a,children:n}=e,l=f(e,["className","children"]);return r.createElement(u.bL,Object.assign({ref:t,className:o("relative overflow-hidden",a)},l),r.createElement(u.LM,{className:"h-full w-full rounded-[inherit]"},n),r.createElement(v,null),r.createElement(u.OK,null))}));p.displayName=u.bL.displayName;const v=r.forwardRef(((e,t)=>{var{className:a,orientation:n="vertical"}=e,l=f(e,["className","orientation"]);return r.createElement(u.VM,Object.assign({ref:t,orientation:n,className:o("flex touch-none select-none transition-colors","vertical"===n&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===n&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a)},l),r.createElement(u.lr,{className:"relative flex-1 rounded-full bg-border"}))}));v.displayName=u.VM.displayName;var h=a(808),b=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a};const x=r.forwardRef,N=(0,h.F)("",{variants:{variant:{h1:"scroll-m-20 font-caption text-4xl font-extrabold tracking-tight lg:text-5xl",h2:"scroll-m-20 font-caption text-3xl font-semibold tracking-tight transition-colors",h3:"scroll-m-20 font-caption text-xl font-semibold tracking-tight",p:"leading-7 [&:not(:first-child)]:mt-6",default:"",quote:"mt-6 border-l-2 pl-6 italic",code:"relative rounded bg-muted px-[0.3rem] py-[0.2rem] font-mono text-sm font-semibold",lead:"text-xl text-muted-foreground",large:"text-lg font-semibold",small:"text-sm font-medium leading-none ",muted:"text-sm text-muted-foreground",link:"font-medium text-cyan-600 hover:underline dark:text-primary"}},defaultVariants:{variant:"default"}}),y={h1:"h1",h2:"h2",h3:"h3",p:"p",quote:"p",code:"code",lead:"p",large:"p",small:"p",muted:"p",link:"a",default:"p"},g=x(((e,t)=>{var{variant:a="default",className:n,as:l}=e,s=b(e,["variant","className","as"]);const c=null!=l?l:y[null!=a?a:"default"];return r.createElement(c,Object.assign({},s,{className:o(N({variant:a}),n),ref:t}))}));var E=a(619);const w=new(a.n(E)())({stdTTL:300});var O=a(378),j=a(587),k=a(638),P=a(518),S=(a(826),function(e,t,a,r){return new(a||(a=Promise))((function(n,l){function s(e){try{c(r.next(e))}catch(e){l(e)}}function o(e){try{c(r.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,o)}c((r=r.apply(e,t||[])).next())}))});const L=({userId:e,token:t,posts:a,user:n})=>{const[l,s]=(0,r.useState)(a),[o,c]=(0,r.useState)(n),[u,f]=(0,r.useState)(!0),[v,h]=(0,r.useState)(null),b=(0,r.useRef)(null),[x,N]=(0,r.useState)(!1),y="http://localhost:3000";(0,r.useEffect)((()=>{S(void 0,void 0,void 0,(function*(){try{const a=yield function(e,t){return new Promise(((a,r)=>{const n=w.get(e);n?a(n):t().then((t=>{w.set(e,t),a(t)})).catch(r)}))}(`userData_${e}`,(()=>S(void 0,void 0,void 0,(function*(){const a=yield fetch(`${y}/api/widget/user-data?userId=${e}`,{headers:{Authorization:`Bearer ${t}`}});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return a.json()}))));if(!a.success)throw new Error(a.error||"Failed to fetch data");s(a.data.recentPosts),c(a.data.user)}catch(e){h(e instanceof Error?e.message:"An unexpected error occurred")}finally{f(!1)}}))}),[e,t,y]);const E=()=>{if(b.current){const e=b.current.scrollTop;N(e>300)}};return(0,r.useEffect)((()=>{const e=b.current;if(e)return e.addEventListener("scroll",E),()=>{e.removeEventListener("scroll",E)}}),[]),u?r.createElement("div",{className:"p-6 text-white"},"Loading..."):v?r.createElement("div",{className:"p-6 text-white"},"Error: ",v):r.createElement("div",{className:"relative h-screen w-80 border-r bg-red-600"},r.createElement("div",{className:"sticky top-0 z-10 border-b bg-background p-6"},r.createElement("div",{className:"flex items-center space-x-4"},r.createElement(i,{className:"size-16"},r.createElement(m,{src:(null==o?void 0:o.image)||"/placeholder-user.jpg",alt:(null==o?void 0:o.displayName)||(null==o?void 0:o.name)||"User Avatar"}),r.createElement(d,null,(null==o?void 0:o.displayName)?o.displayName.split(" ").map((e=>e[0])).join(""):(null==o?void 0:o.name)?o.name.split(" ").map((e=>e[0])).join(""):"??")),r.createElement("div",null,r.createElement(g,{variant:"h2",className:"text-lg font-semibold text-white"},(null==o?void 0:o.displayName)||(null==o?void 0:o.name)),r.createElement(g,{variant:"p",className:"text-sm text-muted-foreground"},null==o?void 0:o.bio)))),r.createElement(p,{className:"h-[calc(100vh-120px)] space-y-8 p-6",ref:b},l.map((e=>r.createElement("div",{key:e.id,className:"space-y-2"},r.createElement("div",{className:"text-xs text-muted-foreground"},new Date(e.createdAt).toLocaleString()),r.createElement("p",{className:"text-sm text-white"},e.content),r.createElement("div",{className:"flex items-center space-x-4 text-xs text-muted-foreground"},r.createElement("div",{className:"flex items-center space-x-1"},r.createElement(O.A,{className:"size-3"}),r.createElement("span",null,e._count.comments)),r.createElement("div",{className:"flex items-center space-x-1"},r.createElement(j.A,{className:"size-3"}),r.createElement("span",null,e._count.bookmarks)),r.createElement("div",{className:"flex items-center space-x-1"},r.createElement(k.A,{className:"size-3"}),r.createElement("span",null,e._count.likes))))))),x&&r.createElement("button",{onClick:()=>{b.current&&b.current.scrollTo({top:0,behavior:"smooth"})},className:"absolute bottom-4 right-4 rounded-full bg-primary p-2 text-primary-foreground shadow-lg transition-opacity duration-300 hover:opacity-80","aria-label":"Scroll to top"},r.createElement(P.A,{className:"size-4"})))}}}]);
//# sourceMappingURL=254.01331c6d53c839bcabff.js.map