(this.webpackChunkNowNowNowWidget=this.webpackChunkNowNowNowWidget||[]).push([[141],{779:t=>{var e=function(){"use strict";function t(t,e){return null!=e&&t instanceof e}var e,i,n;try{e=Map}catch(t){e=function(){}}try{i=Set}catch(t){i=function(){}}try{n=Promise}catch(t){n=function(){}}function s(r,a,h,l,u){"object"==typeof a&&(h=a.depth,l=a.prototype,u=a.includeNonEnumerable,a=a.circular);var c=[],f=[],p="undefined"!=typeof Buffer;return void 0===a&&(a=!0),void 0===h&&(h=1/0),function r(h,d){if(null===h)return null;if(0===d)return h;var v,y;if("object"!=typeof h)return h;if(t(h,e))v=new e;else if(t(h,i))v=new i;else if(t(h,n))v=new n((function(t,e){h.then((function(e){t(r(e,d-1))}),(function(t){e(r(t,d-1))}))}));else if(s.__isArray(h))v=[];else if(s.__isRegExp(h))v=new RegExp(h.source,o(h)),h.lastIndex&&(v.lastIndex=h.lastIndex);else if(s.__isDate(h))v=new Date(h.getTime());else{if(p&&Buffer.isBuffer(h))return v=Buffer.allocUnsafe?Buffer.allocUnsafe(h.length):new Buffer(h.length),h.copy(v),v;t(h,Error)?v=Object.create(h):void 0===l?(y=Object.getPrototypeOf(h),v=Object.create(y)):(v=Object.create(l),y=l)}if(a){var m=c.indexOf(h);if(-1!=m)return f[m];c.push(h),f.push(v)}for(var g in t(h,e)&&h.forEach((function(t,e){var i=r(e,d-1),n=r(t,d-1);v.set(i,n)})),t(h,i)&&h.forEach((function(t){var e=r(t,d-1);v.add(e)})),h){var _;y&&(_=Object.getOwnPropertyDescriptor(y,g)),_&&null==_.set||(v[g]=r(h[g],d-1))}if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(h);for(g=0;g<b.length;g++){var w=b[g];(!(k=Object.getOwnPropertyDescriptor(h,w))||k.enumerable||u)&&(v[w]=r(h[w],d-1),k.enumerable||Object.defineProperty(v,w,{enumerable:!1}))}}if(u){var E=Object.getOwnPropertyNames(h);for(g=0;g<E.length;g++){var k,L=E[g];(k=Object.getOwnPropertyDescriptor(h,L))&&k.enumerable||(v[L]=r(h[L],d-1),Object.defineProperty(v,L,{enumerable:!1}))}}return v}(r,h)}function r(t){return Object.prototype.toString.call(t)}function o(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return s.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},s.__objToStr=r,s.__isDate=function(t){return"object"==typeof t&&"[object Date]"===r(t)},s.__isArray=function(t){return"object"==typeof t&&"[object Array]"===r(t)},s.__isRegExp=function(t){return"object"==typeof t&&"[object RegExp]"===r(t)},s.__getRegExpFlags=o,s}();t.exports&&(t.exports=e)},7:t=>{"use strict";var e,i="object"==typeof Reflect?Reflect:null,n=i&&"function"==typeof i.apply?i.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};e=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function r(){r.init.call(this)}t.exports=r,t.exports.once=function(t,e){return new Promise((function(i,n){function s(i){t.removeListener(e,r),n(i)}function r(){"function"==typeof t.removeListener&&t.removeListener("error",s),i([].slice.call(arguments))}v(t,e,r,{once:!0}),"error"!==e&&function(t,e,i){"function"==typeof t.on&&v(t,"error",e,i)}(t,s,{once:!0})}))},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var o=10;function a(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function h(t){return void 0===t._maxListeners?r.defaultMaxListeners:t._maxListeners}function l(t,e,i,n){var s,r,o,l;if(a(i),void 0===(r=t._events)?(r=t._events=Object.create(null),t._eventsCount=0):(void 0!==r.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),r=t._events),o=r[e]),void 0===o)o=r[e]=i,++t._eventsCount;else if("function"==typeof o?o=r[e]=n?[i,o]:[o,i]:n?o.unshift(i):o.push(i),(s=h(t))>0&&o.length>s&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=o.length,l=u,console&&console.warn&&console.warn(l)}return t}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(t,e,i){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},s=u.bind(n);return s.listener=i,n.wrapFn=s,s}function f(t,e,i){var n=t._events;if(void 0===n)return[];var s=n[e];return void 0===s?[]:"function"==typeof s?i?[s.listener||s]:[s]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(s):d(s,s.length)}function p(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function d(t,e){for(var i=new Array(e),n=0;n<e;++n)i[n]=t[n];return i}function v(t,e,i,n){if("function"==typeof t.on)n.once?t.once(e,i):t.on(e,i);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function s(r){n.once&&t.removeEventListener(e,s),i(r)}))}}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o=t}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},r.prototype.getMaxListeners=function(){return h(this)},r.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var s="error"===t,r=this._events;if(void 0!==r)s=s&&void 0===r.error;else if(!s)return!1;if(s){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var h=r[t];if(void 0===h)return!1;if("function"==typeof h)n(h,this,e);else{var l=h.length,u=d(h,l);for(i=0;i<l;++i)n(u[i],this,e)}return!0},r.prototype.addListener=function(t,e){return l(this,t,e,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(t,e){return l(this,t,e,!0)},r.prototype.once=function(t,e){return a(e),this.on(t,c(this,t,e)),this},r.prototype.prependOnceListener=function(t,e){return a(e),this.prependListener(t,c(this,t,e)),this},r.prototype.removeListener=function(t,e){var i,n,s,r,o;if(a(e),void 0===(n=this._events))return this;if(void 0===(i=n[t]))return this;if(i===e||i.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(s=-1,r=i.length-1;r>=0;r--)if(i[r]===e||i[r].listener===e){o=i[r].listener,s=r;break}if(s<0)return this;0===s?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,s),1===i.length&&(n[t]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",t,o||e)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(t){var e,i,n;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0===arguments.length){var s,r=Object.keys(i);for(n=0;n<r.length;++n)"removeListener"!==(s=r[n])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},r.prototype.listeners=function(t){return f(this,t,!0)},r.prototype.rawListeners=function(t){return f(this,t,!1)},r.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},r.prototype.listenerCount=p,r.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},342:function(t,e,i){(function(){(t.exports=i(321)).version="5.1.2"}).call(this)},321:function(t,e,i){(function(){var e,n,s=[].splice,r=function(t,e){if(!(t instanceof e))throw new Error("Bound instance method accessed before binding")},o=[].indexOf;n=i(779),e=i(7).EventEmitter,t.exports=function(){class t extends e{constructor(t={}){super(),this.get=this.get.bind(this),this.mget=this.mget.bind(this),this.set=this.set.bind(this),this.mset=this.mset.bind(this),this.del=this.del.bind(this),this.take=this.take.bind(this),this.ttl=this.ttl.bind(this),this.getTtl=this.getTtl.bind(this),this.keys=this.keys.bind(this),this.has=this.has.bind(this),this.getStats=this.getStats.bind(this),this.flushAll=this.flushAll.bind(this),this.flushStats=this.flushStats.bind(this),this.close=this.close.bind(this),this._checkData=this._checkData.bind(this),this._check=this._check.bind(this),this._isInvalidKey=this._isInvalidKey.bind(this),this._wrap=this._wrap.bind(this),this._getValLength=this._getValLength.bind(this),this._error=this._error.bind(this),this._initErrors=this._initErrors.bind(this),this.options=t,this._initErrors(),this.data={},this.options=Object.assign({forceString:!1,objectValueSize:80,promiseValueSize:80,arrayValueSize:40,stdTTL:0,checkperiod:600,useClones:!0,deleteOnExpire:!0,enableLegacyCallbacks:!1,maxKeys:-1},this.options),this.options.enableLegacyCallbacks&&(console.warn("WARNING! node-cache legacy callback support will drop in v6.x"),["get","mget","set","del","ttl","getTtl","keys","has"].forEach((t=>{var e;e=this[t],this[t]=function(...t){var i,n;if(n=t,[...t]=n,[i]=s.call(t,-1),"function"!=typeof i)return e(...t,i);try{i(null,e(...t))}catch(t){i(t)}}}))),this.stats={hits:0,misses:0,keys:0,ksize:0,vsize:0},this.validKeyTypes=["string","number"],this._checkData()}get(e){var i;if(r(this,t),null!=(i=this._isInvalidKey(e)))throw i;return null!=this.data[e]&&this._check(e,this.data[e])?(this.stats.hits++,this._unwrap(this.data[e])):void this.stats.misses++}mget(e){var i,n,s,o,a;if(r(this,t),!Array.isArray(e))throw this._error("EKEYSTYPE");for(a={},n=0,o=e.length;n<o;n++){if(s=e[n],null!=(i=this._isInvalidKey(s)))throw i;null!=this.data[s]&&this._check(s,this.data[s])?(this.stats.hits++,a[s]=this._unwrap(this.data[s])):this.stats.misses++}return a}set(e,i,n){var s,o;if(r(this,t),this.options.maxKeys>-1&&this.stats.keys>=this.options.maxKeys)throw this._error("ECACHEFULL");if(this.options.forceString,null==n&&(n=this.options.stdTTL),null!=(s=this._isInvalidKey(e)))throw s;return o=!1,this.data[e]&&(o=!0,this.stats.vsize-=this._getValLength(this._unwrap(this.data[e],!1))),this.data[e]=this._wrap(i,n),this.stats.vsize+=this._getValLength(i),o||(this.stats.ksize+=this._getKeyLength(e),this.stats.keys++),this.emit("set",e,i),!0}mset(e){var i,n,s,o,a,h,l,u,c;if(r(this,t),this.options.maxKeys>-1&&this.stats.keys+e.length>=this.options.maxKeys)throw this._error("ECACHEFULL");for(n=0,h=e.length;n<h;n++){if(a=e[n],({key:o,val:c,ttl:u}=a),u&&"number"!=typeof u)throw this._error("ETTLTYPE");if(null!=(i=this._isInvalidKey(o)))throw i}for(s=0,l=e.length;s<l;s++)a=e[s],({key:o,val:c,ttl:u}=a),this.set(o,c,u);return!0}del(e){var i,n,s,o,a,h;for(r(this,t),Array.isArray(e)||(e=[e]),i=0,s=0,a=e.length;s<a;s++){if(o=e[s],null!=(n=this._isInvalidKey(o)))throw n;null!=this.data[o]&&(this.stats.vsize-=this._getValLength(this._unwrap(this.data[o],!1)),this.stats.ksize-=this._getKeyLength(o),this.stats.keys--,i++,h=this.data[o],delete this.data[o],this.emit("del",o,h.v))}return i}take(e){var i;return r(this,t),null!=(i=this.get(e))&&this.del(e),i}ttl(e,i){var n;if(r(this,t),i||(i=this.options.stdTTL),!e)return!1;if(null!=(n=this._isInvalidKey(e)))throw n;return!(null==this.data[e]||!this._check(e,this.data[e]))&&(i>=0?this.data[e]=this._wrap(this.data[e].v,i,!1):this.del(e),!0)}getTtl(e){var i;if(r(this,t),e){if(null!=(i=this._isInvalidKey(e)))throw i;return null!=this.data[e]&&this._check(e,this.data[e])?this.data[e].t:void 0}}keys(){return r(this,t),Object.keys(this.data)}has(e){return r(this,t),null!=this.data[e]&&this._check(e,this.data[e])}getStats(){return r(this,t),this.stats}flushAll(e=!0){r(this,t),this.data={},this.stats={hits:0,misses:0,keys:0,ksize:0,vsize:0},this._killCheckPeriod(),this._checkData(e),this.emit("flush")}flushStats(){r(this,t),this.stats={hits:0,misses:0,keys:0,ksize:0,vsize:0},this.emit("flush_stats")}close(){r(this,t),this._killCheckPeriod()}_checkData(e=!0){var i,n,s;for(i in r(this,t),n=this.data)s=n[i],this._check(i,s);e&&this.options.checkperiod>0&&(this.checkTimeout=setTimeout(this._checkData,1e3*this.options.checkperiod,e),null!=this.checkTimeout&&null!=this.checkTimeout.unref&&this.checkTimeout.unref())}_killCheckPeriod(){if(null!=this.checkTimeout)return clearTimeout(this.checkTimeout)}_check(e,i){var n;return r(this,t),n=!0,0!==i.t&&i.t<Date.now()&&(this.options.deleteOnExpire&&(n=!1,this.del(e)),this.emit("expired",e,this._unwrap(i))),n}_isInvalidKey(e){var i;if(r(this,t),i=typeof e,o.call(this.validKeyTypes,i)<0)return this._error("EKEYTYPE",{type:typeof e})}_wrap(e,i,s=!0){var o;return r(this,t),this.options.useClones||(s=!1),o=Date.now(),{t:0===i?0:i?o+1e3*i:0===this.options.stdTTL?this.options.stdTTL:o+1e3*this.options.stdTTL,v:s?n(e):e}}_unwrap(t,e=!0){return this.options.useClones||(e=!1),null!=t.v?e?n(t.v):t.v:null}_getKeyLength(t){return t.toString().length}_getValLength(e){return r(this,t),"string"==typeof e?e.length:this.options.forceString?JSON.stringify(e).length:Array.isArray(e)?this.options.arrayValueSize*e.length:"number"==typeof e?8:"function"==typeof(null!=e?e.then:void 0)?this.options.promiseValueSize:("undefined"!=typeof Buffer&&null!==Buffer?Buffer.isBuffer(e):void 0)?e.length:null!=e&&"object"==typeof e?this.options.objectValueSize*Object.keys(e).length:"boolean"==typeof e?8:0}_error(e,i={}){var n;return r(this,t),(n=new Error).name=e,n.errorcode=e,n.message=null!=this.ERRORS[e]?this.ERRORS[e](i):"-",n.data=i,n}_initErrors(){var e,i,n;for(i in r(this,t),this.ERRORS={},n=this._ERRORS)e=n[i],this.ERRORS[i]=this.createErrorMessage(e)}createErrorMessage(t){return function(e){return t.replace("__key",e.type)}}}return t.prototype._ERRORS={ENOTFOUND:"Key `__key` not found",ECACHEFULL:"Cache max keys amount exceeded",EKEYTYPE:"The key argument has to be of type `string` or `number`. Found: `__key`",EKEYSTYPE:"The keys argument has to be an array.",ETTLTYPE:"The ttl argument has to be a number."},t}.call(this)}).call(this)},141:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>a});var n=i(342);const s=new(i.n(n)())({stdTTL:300});var r=i(540),o=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{h(n.next(t))}catch(t){r(t)}}function a(t){try{h(n.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((n=n.apply(t,e||[])).next())}))};const a=({userId:t,token:e,posts:i,user:n})=>{const[a,h]=(0,r.useState)(i),[l,u]=(0,r.useState)(n),[c,f]=(0,r.useState)(!0),[p,d]=(0,r.useState)(null);return(0,r.useEffect)((()=>{o(void 0,void 0,void 0,(function*(){try{const i=yield function(t,e){return new Promise(((i,n)=>{const r=s.get(t);r?i(r):e().then((e=>{s.set(t,e),i(e)})).catch(n)}))}(`userData_${t}`,(()=>o(void 0,void 0,void 0,(function*(){const i=yield fetch(`/api/widget/userData?userId=${t}`,{headers:{Authorization:`Bearer ${e}`}});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);return i.json()}))));if(!i.success)throw new Error(i.error||"Failed to fetch data");h(i.data.recentPosts),u(i.data.user)}catch(t){d(t instanceof Error?t.message:"An unexpected error occurred")}finally{f(!1)}}))}),[t,e]),c?r.createElement("div",null,"Loading..."):p?r.createElement("div",null,"Error: ",p):r.createElement("div",{className:"sidepanel-content"},l&&r.createElement("div",{className:"user-info"},r.createElement("img",{src:l.avatarUrl,alt:l.displayName,className:"avatar"}),r.createElement("h2",null,l.displayName)),r.createElement("h3",null,"Recent Posts"),0===a.length?r.createElement("p",null,"No posts available."):r.createElement("ul",null,a.map((t=>r.createElement("li",{key:t.id},r.createElement("p",null,t.content),r.createElement("small",null,new Date(t.createdAt).toLocaleString()))))))}}}]);
//# sourceMappingURL=141.now-bundle.js.map